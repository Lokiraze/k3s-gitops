# ---
# apiVersion: helm.fluxcd.io/v1
# kind: HelmRelease
# metadata:
#   name: mosquitto
#   namespace: home
#   annotations:
#     fluxcd.io/ignore: "false"
#     fluxcd.io/automated: "false"
#     fluxcd.io/tag.chart-image: 'semver:0'
# spec:
#   releaseName: mosquitto
#   helmVersion: v3
#   rollback:
#     enable: false
#   chart:
#     repository: https://k8s-at-home.com/charts/
#     name: mosquitto
#     version: 0.3.3
#   values:
#     image:
#       repository: eclipse-mosquitto
#       tag: 1.6.12
#     replicaCount: 1
#     serviceMonitor:
#       create: true
#     persistentVolume:
#       enabled: false
# #      accessModes: ReadWriteOnce
#       size: 5Gi
#       storageClass: "nfs-client"
#     service:
#       type: LoadBalancer
#       loadBalancerIP: 192.168.1.81
#       mqtt:
#         enabled: true
#         port: 1883                                                              # Default port. Here for visability
#       mqtts:
#         enabled: false                                                          # Disabled, too much work to get cert inside pod
#         port: 8883                                                              # Default port. Here for visability
#       ws:
#         enabled: true
#         port: 8080                                                              # Default port. Here for visability
#     statefulset:
#       podAnnotations:
#         prometheus.io/scrape: "true"
#         prometheus.io/port: "8888"